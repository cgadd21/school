<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Storage Example</title>
    <script type="text/javascript" src="cookies.js"></script>
    <script type="text/javascript">
      ////////////////////////////Careful - does not work on file:// (MUST upload to gibson)
      //////For the project, do something that fits into what you are building - if you do this, you will get a "0" for storage
      //localStorage & cookies

      const changebg = (color) => {
        //does the browser understand localStorage?
        if (window.localStorage) {
          //do localStorage
          console.log('localStorage');

          //was there an arg sent in ? change the ls
          if (color) {
            //clicked on something and want to store it
            localStorage.setItem('dsbics_color', color);
          }

          //is there something in ls to chnage the color to?
          if (localStorage.getItem('dsbics_color')) {
            document.body.style.background =
              localStorage.getItem('dsbics_color');
          }
        } else {
          //do coookies
          console.log('cookies');
        }
      };

      const clearbg = () => {
        //remove the ls
        localStorage.removeItem('dsbics_color');
        //clear the bg color
        document.body.style.background = '';
      };

      //cookies
      //have they been here before?
      if (GetCookie('user_id') == null) {
        //first name...
        let name = prompt('<h2>Welcome, first time...?</h2>');
        document.write('<h2>Welcome, ' + name + '</h2>');

        //write the cookie
        SetCookie('user_id', name);
        SetCookie('hit_count', 1);
      } else {
        //they have been here
        document.write(
          '<h3>Welcome back, ' +
            GetCookie('user_id') +
            ' you have been here ' +
            GetCookie('hit_count') +
            ' times.</h3>',
        );

        //add to the hit count
        SetCookie(hit_count, parseInt(GetCookie('hit_count')) + 1);
      }
    </script>
  </head>
  <body onload="changebg()">
    <div id="output"></div>
    <div
      style="position: absolute; right: 10px; bottom: 10px; background: #c9c"
    >
      Change your style.
      <span style="cursor: pointer" onclick="changebg('red');">Red</span> |
      <span style="cursor: pointer" onclick="changebg('green');">Green</span> |
      <span style="cursor: pointer" onclick="clearbg()">Clear</span>
    </div>
  </body>
</html>
